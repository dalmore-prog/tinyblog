<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - <%= settings.site_name %></title>
    <link rel="preconnect" href="https://fonts.loli.net">
    <link rel="preconnect" href="https://gstatic.loli.net" crossorigin>
    <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8108389486087485" crossorigin="anonymous"></script>
</head>
<body>

    <!-- Header -->
    <header class="site-header">
        <div class="header-inner">
            <a href="/" class="logo"><%= settings.site_name %></a>
            <div class="nav-menu">
                <a href="/" class="nav-item">é¦–é¡µ</a>
                <a href="/about" class="nav-item" style="color: var(--primary-color);">å…³äº</a>
                <a href="#" class="nav-item" onclick="openContactModal(); return false;">è”ç³»å®¢æœ</a>
                <select id="theme-select" class="theme-select" onchange="changeTheme(this.value)">
                    <option value="light">â˜€ï¸ æµ…è‰²</option>
                    <option value="dark">ğŸŒ™ æ·±è‰²</option>
                    <option value="sepia">ğŸ“– æŠ¤çœ¼</option>
                </select>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container" style="display: block; max-width: 800px;">
        
        <article class="article-container" style="padding: 60px;">
            <header class="article-header">
                <h1 class="article-h1"><%= title %></h1>
            </header>

            <div class="markdown-body">
                <%- content %>
            </div>
        </article>

    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-links">
            <a href="/about">å…³äºæˆ‘ä»¬</a>
            <a href="#" onclick="openContactModal(); return false;">è”ç³»æ–¹å¼</a>
            <a href="/privacy">éšç§æ”¿ç­–</a>
        </div>
        <p>&copy; <%= new Date().getFullYear() %> <%= settings.site_name %>. All Rights Reserved.</p>
    </footer>

    <!-- Contact Modal -->
    <div class="modal-overlay" id="contact-modal" style="display: none;">
        <div class="modal">
            <button class="modal-close" onclick="closeContactModal()"><i class="fas fa-times"></i></button>
            <h3>è”ç³»å®¢æœ</h3>
            <p>æ‰«æä¸‹æ–¹äºŒç»´ç æ·»åŠ å®¢æœå¾®ä¿¡</p>
            <img src="<%= settings.wechat_qr_image %>" alt="QR Code">
            <p style="font-size: 0.9rem; margin-top: 15px;">è·å–æœ€æ–°æ–‡ç« å¡å¯† / å•†åŠ¡åˆä½œ</p>
        </div>
    </div>

    <script>
        // Contact Modal Logic
        function openContactModal() {
            document.getElementById('contact-modal').style.display = 'flex';
        }
        function closeContactModal() {
            document.getElementById('contact-modal').style.display = 'none';
        }
        document.getElementById('contact-modal').addEventListener('click', function(e) {
            if (e.target === this) closeContactModal();
        });

        // Theme Logic
        const savedTheme = localStorage.getItem('theme') || '<%= settings.default_theme || "light" %>';
        document.body.setAttribute('data-theme', savedTheme);
        document.getElementById('theme-select').value = savedTheme;

        function changeTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
        }
    </script>
</body>
</html>